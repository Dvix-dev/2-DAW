<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="David Escutia de Haro">
    <meta name="author" content="Dvix">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="favicon" href="assets/">
    <link rel="stylesheet" href="main.css">
    <title>Puntuable 6.1</title>
</head>

<body>
    <main>
        <button class="debug-btn" onclick="Debugzone()">
            <svg id='Bug_24' width='24' height='24' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'><rect width='24' height='24' stroke='none' fill='#000000' opacity='0'/><g transform="matrix(0.77 0 0 0.77 12 12)" ><path style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(0,0,0); fill-rule: nonzero; opacity: 1;" transform=" translate(-15, -14.46)" d="M 10.03125 2.9042969 C 9.69664228894774 2.8924568348356656 9.378307750037417 3.048843026930595 9.183179658750413 3.320923043523911 C 8.98805156746341 3.593003060117228 8.942019722210347 3.9446770411903205 9.0605469 4.2578125 C 9.0605469 4.2578125 9.7494688 5.9996671 11.488281 7.0800781 C 11.080693 7.2039808 10.414387 7.5446908 9.8027344 8.4570312 C 9.4322834 8.3403526 9.1037156 8.2185154 8.8496094 8.0976562 C 8.3997876 7.8837103 8.118603 7.6807271 7.9589844 7.546875 C 7.7993657 7.4130229 7.8046875 7.40625 7.8046875 7.40625 C 7.616153383553649 7.1507756967968366 7.317509421349109 7.0000039877227 7 7 L 5 7 C 4.639364083422431 6.994899710454515 4.303918635428393 7.184375296169332 4.122112278513483 7.495872849714331 C 3.9403059215985725 7.80737040325933 3.940305921598573 8.192629596740671 4.122112278513484 8.50412715028567 C 4.303918635428394 8.815624703830668 4.639364083422431 9.005100289545485 5.000000000000001 9 L 6.5957031 9 C 6.6368531 9.038228 6.6271651 9.038995 6.6738281 9.078125 C 6.961397 9.3192729 7.3888062 9.6162897 7.9902344 9.9023438 C 9.1930908 10.474451 11.083447 11 13.935547 11 C 14.004396389438266 11.000566303843499 14.073120219012878 10.994021257005604 14.140625 10.980469 C 14.430223 10.987386 14.697172 11 15.017578 11 C 15.326932 11 15.582943 10.988887 15.863281 10.982422 C 15.929573513753372 10.995053717723033 15.996974349304502 11.000943065581174 16.064453 11 C 18.916553 11 20.806909 10.474451 22.009766 9.9023438 C 22.611194 9.6162897 23.038603 9.3192729 23.326172 9.078125 C 23.372834 9.0389949 23.363147 9.0382279 23.404297 9 L 25 9 C 25.360635916577568 9.005100289545485 25.696081364571608 8.815624703830668 25.877887721486516 8.504127150285669 C 26.059694078401428 8.192629596740671 26.059694078401428 7.80737040325933 25.877887721486516 7.495872849714331 C 25.696081364571608 7.184375296169332 25.360635916577568 6.994899710454515 25 7 L 23 7 C 22.682490402534103 7.000003828984545 22.383846221023642 7.150775555092832 22.195312 7.40625 C 22.195312 7.40625 22.200612 7.41302 22.041016 7.546875 C 21.881397 7.6807271 21.600212 7.8837103 21.150391 8.0976562 C 20.891444 8.2208175 20.55751 8.3444389 20.177734 8.4628906 C 19.558423 7.539139 18.907199 7.1978378 18.517578 7.0761719 C 20.252095 5.9954925 20.939453 4.2578125 20.939453 4.2578125 C 21.053572821366537 3.956306566885785 21.01535455789258 3.618277629326907 20.83679823593128 3.349862277270701 C 20.658241913969984 3.081446925214495 20.361245530761355 2.9155633918209025 20.039062 2.9042969 C 19.600880053659328 2.8895612446423242 19.204188479570515 3.1619404635004105 19.060547 3.5761719000000003 C 19.060547 3.5761719 18.556779 5.088719 16.882812 5.6757812 C 16.36708 5.2573881 15.71568 5 15 5 C 14.284868 5 13.632808 5.2576596 13.117188 5.6757812 C 11.443221 5.088719 10.939453 3.5761719 10.939453 3.5761719 C 10.804310029018259 3.186301848816874 10.443600024042079 2.9194539804511326 10.03125 2.9042969 z M 5.9628906 11 C 5.867850693300375 11.003560738750965 5.773804582061653 11.020659952114002 5.683593799999999 11.050781 L 2.6835938 12.050781 C 2.1593546220503645 12.225527319011913 1.8760346809880888 12.792167022050364 2.050781000000001 13.3164062 C 2.2255273190119134 13.840645377949636 2.792167022050365 14.123965319011912 3.3164062000000003 13.949219 L 5.9707031 13.064453 C 6.0672386 13.111686 6.3494962 13.235909 6.5917969 13.34375 C 6.2888038 14.107541 6 15.15686 6 16.425781 C 6 17.948961 6.3086267 19.289595 6.7949219 20.453125 L 6.1601562 22.357422 L 3.4453125 24.167969 C 3.1418029004195875 24.363500942879558 2.967243090005324 24.70743971809872 2.988594880318833 25.067849094744396 C 3.009946670632342 25.428258471390073 3.22389495367328 25.749180799524083 3.548368348985167 25.90750904545163 C 3.8728417442970535 26.065837291379175 4.25746207127288 26.036989196327195 4.5546875 25.832031 L 7.5546875 23.832031 C 7.739880140471913 23.70881369744665 7.8787094633102255 23.52737341732564 7.9492188 23.316406 L 8.1367188 22.751953 C 9.8000084 24.902319 11.988204 26 13 26 C 13.742 26 14 25.42 14 25 L 14 16 C 14 15.447 14.448 15 15 15 C 15.552 15 16 15.447 16 16 L 16 25 C 16 25.42 16.258 26 17 26 C 18.011796 26 20.199992 24.902319 21.863281 22.751953 L 22.050781 23.316406 C 22.12129025866772 23.527373373777934 22.26011947159537 23.708813648219788 22.445312 23.832031 L 25.445312 25.832031 C 25.74253749519183 26.036981668395583 26.12715312060955 26.06582501136772 26.451621856963445 25.907496837637556 C 26.776090593317342 25.74916866390739 26.990036212078774 25.428250621469665 27.0113900275362 25.067845590937026 C 27.03274384299363 24.707440560404386 26.85819051358432 24.36350415212315 26.554688 24.167969 L 23.839844 22.357422 L 23.205078 20.453125 C 23.691373 19.289595 24 17.948961 24 16.425781 C 24 15.15686 23.711196 14.107541 23.408203 13.34375 C 23.650504 13.235909 23.932762 13.111686 24.029297 13.064453 L 26.683594 13.949219 C 27.022743039509546 14.062354430044897 27.39648755713019 13.985932273662051 27.664004207458184 13.74874766554217 C 27.93152085778618 13.511563057422292 28.0521546152833 13.149661403668377 27.980451838495437 12.799403772298836 C 27.908749061707574 12.449146140929294 27.655606561049698 12.16376186526161 27.316406 12.050781 L 24.316406 11.050781 C 24.22120194647247 11.019158207266004 24.12178182078112 11.002039601659328 24.021484 11 C 23.85898503500724 10.996543512247435 23.69809219900404 11.032744486157668 23.552734 11.105469 C 23.552734 11.105469 20.660591 12.508607 17.513672 12.896484 C 16.740098 12.956149 15.915495 13 15 13 C 14.084505 13 13.259902 12.956149 12.486328 12.896484 C 9.3394093 12.508607 6.4472656 11.105469 6.4472656 11.105469 C 6.297216925428805 11.03022023756914 6.130641531121574 10.993949702834296 5.9628906 11 z" stroke-linecap="round" /></g></svg>
        </button>
        <form action="index.php" method="post">
            <div>
                <h3>Gambling Generator</h3>
            </div>
            <div id="buttons">
                <button type="submit">Lanzar dados</button>
                <button type="button" onclick="Clear()">Limpiar mesa</button>
            </div>
        </form>
        <div id="php">
        <?php

            $tiradas = tirar(n_tiradas: 12,n_jugadores: 4);       //Hace las tiradas

            $puntuaciones = puntuar($tiradas);           //Asigna las puntuaciones a los jugadores segun las tiradas  

            $podio = premiar($puntuaciones);        //Premia las puntuaciones



            ################ FUNCIONES ##################
            function tirar($n_tiradas,$n_jugadores) {
            // Funcion para simular las tiradas de dados
                $tiradas_realizadas = 0;
                $resultados = [];

                // Inicializar el array de jugadores con un array vacio por cada uno
                for ($jugador=0; $jugador < $n_jugadores; $jugador++) { 
                    $resultados[$jugador] = [];
                }

                while ($tiradas_realizadas <= $n_tiradas) {  
                    $resultado_tirada = rand(1,6);
                    $jugador = rand(0,$n_jugadores-1);
                    $resultados[$jugador][] = $resultado_tirada;
                    $tiradas_realizadas++;                           
                } 
                return $resultados;
            }

            function puntuar($tiradas) {
            // Funci√≥n que suma las puntuaciones
                $punt_jugadores = [];
            
                for ($jugador = 0; $jugador < count($tiradas); $jugador++) {
                    $punt_jugadores[$jugador] = array_sum($tiradas[$jugador]);
                }
            
                return $punt_jugadores;
            }

            function premiar($puntuaciones) {
            // Funcion que ordena y asigna el premio a los jugadores
                $medallas = ["Oro", "Plata", "Bronce", "Nada"];
                $resultado = [];
                
                arsort($puntuaciones);
            
                $i = 0;
                foreach ($puntuaciones as $jugador => $puntos) {
                    $resultado[] = ['jugador' => 'Jugador '.$jugador + 1, 'puntos' => $puntos, 'medalla' => $medallas[$i]];
                    $i++;
                }
            
                return $resultado;
            }


           ################ IMPRIMIR EN EL HTML ##################

            echo "<h2>PODIOüèÜ</h2>";
            echo "<pre id='podio'>";
            print_r($podio);
            echo "</pre>";

            echo "<div id='debug_zone'>";

            echo "<hr>";

            echo "<h1>DEBUG ZONE ‚ö†Ô∏è</h1>";

            echo "<pre>";
            print_r($tiradas);
            echo "</pre>";
            
            echo "<hr>";

            echo "<pre>";
            print_r($puntuaciones);
            echo "</pre>";

            echo "</div>";
        ?>
    </div>
    </main>

    <script>
        function Clear() {
            document.getElementById('php').style.display = 'none';
            document.getElementById('php').innerHTML = '';
        }

        function Debugzone() {
            document.getElementById('debug_zone').style.display = 'block';
        }
    </script>
</body>
</html>